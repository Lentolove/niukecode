package zuoshen.topinterview;

/**
 * Author : tsp
 * Time: 2022/3/11 16:59
 * Desc :ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚
 * <p>
 * ç¤ºä¾‹ 1ï¼š
 * è¾“å…¥ï¼šnums = [1,2,0]
 * è¾“å‡ºï¼š3
 * <p>
 * ç¤ºä¾‹ 2ï¼š
 * <p>
 * è¾“å…¥ï¼šnums = [3,4,-1,1]
 * è¾“å‡ºï¼š2
 * <p>
 * ç¤ºä¾‹ 3ï¼š
 * è¾“å…¥ï¼šnums = [7,8,9,11,12]
 * è¾“å‡ºï¼š1
 * <p>
 * æç¤ºï¼š
 * 1 <= nums.length <= 5 * 10âµ
 * -2Â³Â¹ <= nums[i] <= 2Â³Â¹ - 1
 * <p>
 * Related Topics æ•°ç»„ å“ˆå¸Œè¡¨ ğŸ‘ 1380 ğŸ‘ 0
 */
public class Problem_0041_FirstMissingPositive {

    /**
     * æ€è·¯ï¼šé¢˜ç›®è¦æ±‚O(N)æ—¶é—´å¤æ‚åº¦ï¼Œå¹¶ä¸”ä¸èƒ½ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚
     * å‡å®šæ•°ç»„é•¿åº¦ä¸º n,åˆ™æœŸæœ›çš„æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ä¸º n+1,æœŸæœ›æ•°ç»„ä¸º[1,2,3,4,5] n = 5,æœ€å°æœªå‡ºç°çš„æ­£æ•´æ•°ä¸º6
     * 1.å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ L = 0, R = n, å½“å‰æœŸæœ›çš„æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ä¸º R + 1.
     * 2.Lè¡¨ç¤ºå·¦è¾¹å·²ç»æŒ‰ç…§[1,2..]æ’å¥½çš„éƒ¨åˆ†ï¼Œæ ¹æ®ä»¥ä¸‹æ¡ä»¶æ¥ç§»åŠ¨Lå’ŒRçš„æŒ‡é’ˆ
     * 1) nums[L] == L+1,é‚£ä¹ˆL++
     * 2) nums[L] != L+1å‰æä¸‹ï¼Œnums[L] > R,é¢„æœŸæœ€å°å€¼ä¸º R + 1,æ­¤æ—¶å‡ºç°äº† nums[L] > Rï¼Œeg:R = 6,æ­¤æ—¶å‡ºç°äº†ä¸€ä¸ª 7
     * é‚£å‰é¢ä¸å¯èƒ½å‡ºç°1-6è¿™äº”ä¸ªæ•°å…¨éƒ¨å‡ºç°ï¼Œå°† swap(l,--r)
     * 3)nums[L] <= L, [1,2,3,3..] L = 3,æ­¤æ—¶ nums[L] = 3,å·²ç»å‡ºç°è¿‡äº†ï¼Œå®ƒåªä¼šå¯¼è‡´æˆ‘çš„æœŸæœ›å€¼ R + 1 å‡å°ï¼Œ
     * å› ä¸ºå‡ºç°é‡å¤äº†,è¿™ä¸ªæ•°æ˜¯åƒåœ¾æ•°å­—ã€‚å°† swap(l,--r),å°†æœ€åçš„æœŸæœ›å€¼--,å°†å½“å‰ä½ç½®æ‹¿è¿‡æ¥ç»§ç»­åˆ¤æ–­ã€‚
     * 4) nums[nums[L] - 1] = nums[L], å½“å‰å¤´é¡¶ä¸Šçš„ä½ç½®å…ƒç´ ä¸º: nums[L]= 8ï¼Œé‚£å®ƒåº”è¯¥åœ¨æ•°ç»„ä¸­çš„index = 7ä½ç½®ï¼Œå¦‚æœå½“å‰ nums[7] = 8 = nums[L],
     * åˆ™è¯´æ˜å½“å‰å…ƒç´ å‡ºç°é‡å¤äº†ï¼Œè¿™æ˜¯ä¸€ä¸ªåƒåœ¾æ•°æ®ï¼Œåªä¼šé™ä½æˆ‘çš„é¢„æœŸæœŸæœ›å€¼ï¼Œswap(l,--r)
     * 5) å½“å‰ä½ç½® arr[L] - 1 = 4 = index,å¹¶ä¸” arr[index] = l,å½“å‰é‡åˆ°çš„ nums[L]= 8ï¼Œindex =  7 çš„ä½ç½®åˆšå¥½æ˜¯ Lï¼Œåˆ™äº¤æ¢è¿‡æ¥ï¼Œç»§ç»­
     * [3,4,-1,1]
     */
    public int firstMissingPositive(int[] nums) {
        int l = 0;
        int r = nums.length;
        while (l < r) {
            if (nums[l] == l + 1) {
                l++;
            } else if (nums[l] <= l || nums[l] > r || nums[nums[l] - 1] == nums[l]) {
                //(3),(2),(4)
                swap(nums, l, --r);
            } else {
                //(5)
                swap(nums, l, nums[l] - 1);
            }
        }
        return l + 1;
    }


    /**
     * TODO  åŸºäºæ¡¶æ’åºçš„æ€æƒ³
     */
    public int firstMissingPositive1(int[] nums){

        return 0;
    }

    public static void swap(int[] nums, int i, int j) {
        int temp = nums[i];
        nums[i] = nums[j];
        nums[j] = temp;
    }
}
